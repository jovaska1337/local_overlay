--- a/Telegram/SourceFiles/ffmpeg/ffmpeg_utility.cpp
+++ b/Telegram/SourceFiles/ffmpeg/ffmpeg_utility.cpp
@@ -564,7 +564,7 @@
 	}
 #else // DA_FFMPEG_NEW_CHANNEL_LAYOUT
 	auto result = swr_alloc_set_opts(
-		existing ? existing.get() : nullptr,
+		existing ? existing->get() : nullptr,
 		dstLayout,
 		dstFormat,
 		dstRate,
@@ -576,6 +576,7 @@
 	if (!result) {
 		LogError(u"swr_alloc_set_opts"_q);
 	}
+	auto
 #endif // DA_FFMPEG_NEW_CHANNEL_LAYOUT
 
 	error = AvErrorWrap(swr_init(result));
--- a/Telegram/SourceFiles/media/audio/media_audio_local_cache.cpp
+++ b/Telegram/SourceFiles/media/audio/media_audio_local_cache.cpp
@@ -44,7 +44,7 @@
 		return {};
 	}
 
-	auto inCodec = (const AVCodec*)nullptr;
+	auto inCodec = (AVCodec*)nullptr;
 	const auto streamId = av_find_best_stream(
 		input.get(),
 		AVMEDIA_TYPE_AUDIO,
@@ -152,10 +152,10 @@
 		inCodecContext->sample_rate,
 		&outCodecContext->ch_layout,
 #else // DA_FFMPEG_NEW_CHANNEL_LAYOUT
-		&inCodecContext->channel_layout,
+		inCodecContext->channel_layout,
 		inCodecContext->sample_fmt,
 		inCodecContext->sample_rate,
-		&outCodecContext->channel_layout,
+		outCodecContext->channel_layout,
 #endif // DA_FFMPEG_NEW_CHANNEL_LAYOUT
 		outCodecContext->sample_fmt,
 		outCodecContext->sample_rate);
--- a/Telegram/SourceFiles/ui/controls/round_video_recorder.cpp
+++ b/Telegram/SourceFiles/ui/controls/round_video_recorder.cpp
@@ -341,10 +341,10 @@
 		&_swrContext);
 #else // DA_FFMPEG_NEW_CHANNEL_LAYOUT
 	_swrContext = MakeSwresamplePointer(
-		&_audioCodec->channel_layout,
+		_audioCodec->channel_layout,
 		AV_SAMPLE_FMT_S16,
 		_audioCodec->sample_rate,
-		&_audioCodec->channel_layout,
+		_audioCodec->channel_layout,
 		_audioCodec->sample_fmt,
 		_audioCodec->sample_rate,
 		&_swrContext);
